# BoneIK Tools

**BoneIK Tools** は、IK（インバースキネマティクス）の設定を自動化し、リグに「動き」を与えるための仕上げツールです。

## 機能

### Instant IK Setup (インスタントIK)
ポーズモードでボーンを選択し、**"Add IK"** をクリックするだけです。

以下の処理が全自動で行われます：
1.  **コンストレイント**: 選択ボーンにIKコンストレイントを追加。
2.  **ターゲット**: 制御用（Target）ボーンを自動生成。
3.  **ポールターゲット**: 膝や肘の向きを制御するポールターゲットを自動生成。
4.  **チェーン長**: 適切なチェーンの長さ（Chain Length）を自動推定して設定。

### Object Mode Workflow (メカニカルIK特有の設定)
通常、IKのパラメータ（StiffnessやLimits）をいじるにはポーズモードに入り、ボーンプロパティタブを開く必要がありますが、本ツールでは**オブジェクトモードのままNパネルで完結**します。

!!! tip "機械の関節における『硬さと遊び』"
    *   **Stiffness（剛性）**: 古い油圧シリンダーのような「渋い」動きを再現したい場合、特定の軸のStiffnessを上げることで反応を重くできます。
    *   **Stretch（伸縮）**: ボルトが穴に刺さるような機構では、わずかな「長さの誤差」を吸収するためにStretchを 0.01 程度設定します。モデルがバラバラにならずに接続を維持できます。

### Apply IK (Apply Visual Transform)
IKでポーズをつけた後、「このポーズをモデリングの形状として確定させたい」場合に使用します。
実行すると、現在の変形がメッシュ（またはボーンのRest Pose）に焼き付けられ、IK制約は削除されます。

!!! note "活用例: リバースエンジニアリング"
    メカの「展開状態」と「格納状態」のバリエーションを別々のメッシュとして保存したい場合、IKでポーズを付けて Apply IK をするだけで、複雑なモディファイア設定なしに形状を固定（部品化）できます。

## 使い方
制御したい末端のボーン（例：すね、前腕など）を選択して実行してください。厳密な命名規則などは不要です。

## コマンドリファレンス

### Bone & IK Tools
*Rig Mechanist* タブ内に配置されています。アーマチュア選択時に有効になります。

#### Interactive Creator
*   **Pick Bone & Add IK**: 選択したボーンに対して即座にIKを設定します。
    *   *アイコン*: `HAND`

#### Display Settings
*   **Show Names**: ボーン名の表示/非表示を切り替えます。
    *   *アイコン*: `BONE_DATA`
*   **X-Ray**: アーマチュアの最前面表示（X-Ray）を切り替えます。
    *   *アイコン*: `GHOST_ENABLED`

#### Bone List (IK Setup)
現在のアーマチュアに含まれるボーンのリストです。

*   **[Bone Name Button]**: そのボーンを選択します。
*   **Add IK Target** (スポイトアイコン): そのボーンにIKを設定します。
    *   *アイコン*: `EYEDROPPER`
*   **Apply IK** (チェックアイコン): ビジュアルトランスフォームを適用し、コンストレイントを削除します（ポーズのベイク）。
    *   *アイコン*: `CHECKMARK`
*   **Remove IK** (Xアイコン): IKコンストレイントを削除します。
    *   *アイコン*: `X`
